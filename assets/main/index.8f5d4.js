window.__require=function t(e,o,i){function r(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return r(e[c][1][t]||t)},p,p.exports,t,e,o,i)}return o[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<i.length;c++)r(i[c]);return r}({AILib:[function(t,e,o){"use strict";cc._RF.push(e,"e200arLWgRK2aEVd3mb65un","AILib"),Object.defineProperty(o,"__esModule",{value:!0}),o.obbIntersect=o.sphereOBBDistance=o.sphereAABBDistance=void 0;var i=cc.Vec3,r=cc.Quat,n={x:0,y:0,z:0},c={x:0,y:0,z:0},s={x:0,y:0,z:0},a={x:0,y:0,z:0,w:1};function l(t,e,o){return c.x=Math.max(-o.x,Math.min(t.x,o.x)),c.y=Math.max(-o.y,Math.min(t.y,o.y)),c.z=Math.max(-o.z,Math.min(t.z,o.z)),i.subtract(c,c,t),i.dot(c,c)<=e*e}function p(t,e,o,i){var r=(i.x-o.x)*(t.y-o.y)-(i.y-o.y)*(t.x-o.x),n=(e.x-t.x)*(t.y-o.y)-(e.y-t.y)*(t.x-o.x),c=(i.y-o.y)*(e.x-t.x)-(i.x-o.x)*(e.y-t.y);if(0!==c){var s=r/c,a=n/c;if(s>=0&&s<=1&&a>=0&&a<=1)return!0}return!1}o.sphereAABBDistance=l,o.sphereOBBDistance=function(t,e,o,c,p){return i.subtract(s,t,o),r.conjugate(a,c),i.transformQuat(n,s,a),l(n,e,p)},o.obbIntersect=function(t,e,o,i,r,n){var c,s=e.x,a=e.y,l=e.z,p=o.m,u=p[0],h=p[1],y=p[2],f=p[3],d=p[4],v=p[5],g=p[6],b=p[7],_=p[8],x=r.x,m=r.y,O=r.z,R=n.m,j=R[0],S=R[1],P=R[2],w=R[3],V=R[4],C=R[5],M=R[6],T=R[7],D=R[8],z=u*j+h*S+y*P,k=u*w+h*V+y*C,N=u*M+h*T+y*D,B=f*j+d*S+v*P,A=f*w+d*V+v*C,I=f*M+d*T+v*D,E=g*j+b*S+_*P,L=g*w+b*V+_*C,F=g*M+b*T+_*D,H=i.x-t.x,q=i.y-t.y,G=i.z-t.z,J=H*u+q*h+G*y,U=H*f+q*d+G*v,Z=H*g+q*b+G*_,Q=Number.EPSILON,W=(z>=0?z:-z)+Q,Y=(k>=0?k:-k)+Q,K=(N>=0?N:-N)+Q,X=(B>=0?B:-B)+Q,$=(A>=0?A:-A)+Q,tt=(I>=0?I:-I)+Q,et=(E>=0?E:-E)+Q,ot=(L>=0?L:-L)+Q,it=(F>=0?F:-F)+Q;return!((J>=0?J:-J)>s+(x*W+m*Y+O*K)||(U>=0?U:-U)>a+(x*X+m*$+O*tt)||(Z>=0?Z:-Z)>l+(x*et+m*ot+O*it)||((c=J*z+U*B+Z*E)>=0?c:-c)>s*W+a*X+l*et+x||((c=J*k+U*A+Z*L)>=0?c:-c)>s*Y+a*$+l*ot+m||((c=J*N+U*I+Z*F)>=0?c:-c)>s*K+a*tt+l*it+O||((c=Z*B-U*E)>=0?c:-c)>a*et+l*X+m*K+O*Y||((c=Z*A-U*L)>=0?c:-c)>a*ot+l*$+x*K+O*W||((c=Z*I-U*F)>=0?c:-c)>a*it+l*tt+x*Y+m*W||((c=J*E-Z*z)>=0?c:-c)>s*et+l*W+m*tt+O*$||((c=J*L-Z*k)>=0?c:-c)>s*ot+l*Y+x*tt+O*X||((c=J*F-Z*N)>=0?c:-c)>s*it+l*K+x*$+m*X||((c=U*z-J*B)>=0?c:-c)>s*X+a*W+m*it+O*ot||((c=U*k-J*A)>=0?c:-c)>s*$+a*Y+x*it+O*et||((c=U*N-J*I)>=0?c:-c)>s*tt+a*K+x*ot+m*et)};var u=new cc.Vec2,h=new cc.Vec2,y=new cc.Vec2,f=new cc.Vec2;function d(t,e,o){var i=u,r=h,n=y,c=f;return i.x=o.x,i.y=o.y,r.x=o.x,r.y=o.yMax,n.x=o.xMax,n.y=o.yMax,c.x=o.xMax,c.y=o.y,!!(p(t,e,i,r)||p(t,e,r,n)||p(t,e,n,c)||p(t,e,c,i))}function v(t,e,o){for(var i=o.length,r=0;r<i;++r)if(p(t,e,o[r],o[(r+1)%i]))return!0;return!1}function g(t,e){var o=t.x,i=t.y,r=t.x+t.width,n=t.y+t.height,c=e.x,s=e.y,a=e.x+e.width,l=e.y+e.height;return o<=a&&r>=c&&i<=l&&n>=s}function b(t,e){var o=u,i=h,r=y,n=f;if(o.x=t.x,o.y=t.y,i.x=t.x,i.y=t.yMax,r.x=t.xMax,r.y=t.yMax,n.x=t.xMax,n.y=t.y,v(o,i,e))return!0;if(v(i,r,e))return!0;if(v(r,n,e))return!0;if(v(n,o,e))return!0;for(var c=0,s=e.length;c<s;++c)if(t.contains(e[c]))return!0;return!!(R(o,e)||R(i,e)||R(r,e)||R(n,e))}function _(t,e){var o,i;for(o=0,i=t.length;o<i;++o)if(v(t[o],t[(o+1)%i],e))return!0;for(o=0,i=e.length;o<i;++o)if(R(e[o],t))return!0;for(o=0,i=t.length;o<i;++o)if(R(t[o],e))return!0;return!1}function x(t,e,o,i){return cc.Vec2.distance(t,o)<e+i}function m(t,e,o){var i=e;if(R(i,t))return!0;for(var r=0,n=t.length;r<n;r++)if(j(i,0===r?t[t.length-1]:t[r-1],t[r],!0)<o)return!0;return!1}function O(t,e,o){var i=e.x,r=e.y,n=t.x,c=t.y,s=t.width,a=t.height,l=i,p=r;i<n?l=n:i>n+s&&(l=n+s),r<c?p=c:r>c+a&&(p=c+a);var u=i-l,h=r-p;return Math.sqrt(u*u+h*h)<=o}function R(t,e){for(var o=!1,i=t.x,r=t.y,n=e.length,c=0,s=n-1;c<n;s=c++){var a=e[c].x,l=e[c].y,p=e[s].x,u=e[s].y;l>r!=u>r&&i<(p-a)*(r-l)/(u-l)+a&&(o=!o)}return o}function j(t,e,o,i){var r,n=o.x-e.x,c=o.y-e.y,s=n*n+c*c,a=((t.x-e.x)*n+(t.y-e.y)*c)/s;return i?s?a<0?r=e:a>1?r=o:((r=u).x=e.x+a*n,r.y=e.y+a*c):r=e:((r=u).x=e.x+a*n,r.y=e.y+a*c),n=t.x-r.x,c=t.y-r.y,Math.sqrt(n*n+c*c)}var S=function(){function t(){}return t.lineLine=p,t.lineRect=d,t.linePolygon=v,t.rectRect=g,t.rectPolygon=b,t.rectCircle=O,t.polygonPolygon=_,t.circleCircle=x,t.polygonCircle=m,t.pointInPolygon=R,t.pointLineDistance=j,t}();o.default=S,cc._RF.pop()},{}],Agent:[function(t,e,o){"use strict";cc._RF.push(e,"68460HvO8hH4pX7jUa/LFyB","Agent"),Object.defineProperty(o,"__esModule",{value:!0}),o.Agent=o.RVOConfig=o.KeyValuePair=o.ObserverObj=void 0;var i=t("./Maths"),r=function(t){t&&(this.value=t)};o.ObserverObj=r;o.KeyValuePair=function(t,e){this.Key=t,this.Value=e};var n=function(){function t(){}return t.agentCount=10,t.neighborDist=.75,t.radius=.5,t.maxSpeed=1,t.velocity=new cc.Vec3,t.maxNeighbors=10,t.timeHorizon=5,t.timeHorizonObst=0,t.timeStep=.05,t}();o.RVOConfig=n;var c=function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.check=function(t,e){var o=1/n.timeHorizon,r=i.Vector2.subtract(e.getCenter(),t.getCenter()),c=i.Vector2.subtract(t.newVelocity,e.newVelocity),s=t.neighborDist+e.neighborDist,a=i.RVOMath.sqr(s),l=i.RVOMath.absSq(r),p=new i.Vector2,u=new i.Vector2;if(l>a){var h=i.Vector2.subtract(c,i.Vector2.multiply2(o,r)),y=i.RVOMath.absSq(h),f=i.Vector2.multiply(h,r);if(f<0&&i.RVOMath.sqr(f)>a*y){var d=i.RVOMath.sqrt(y),v=i.Vector2.division(h,d);u=new i.Vector2(v.y,-v.x),p=i.Vector2.multiply2(s*o-d,v)}else{var g=i.RVOMath.sqrt(l-a);u=i.RVOMath.det(r,h)>0?i.Vector2.division(new i.Vector2(r.x*g-r.y*s,r.x*s+r.y*g),l):i.Vector2.division(new i.Vector2(r.x*g+r.y*s,-r.x*s+r.y*g),-l);var b=i.Vector2.multiply(c,u);p=i.Vector2.subtract(i.Vector2.multiply2(b,u),c)}}else{var _=1/n.timeStep;h=i.Vector2.subtract(c,i.Vector2.multiply2(_,r)),d=i.RVOMath.abs(h),v=i.Vector2.division(h,d),u=new i.Vector2(v.y,-v.x),p=i.Vector2.multiply2(s*_-d,v)}var x=new i.Line;x.direction=new i.Vector2(u.x,u.y),x.point=i.Vector2.addition(t.newVelocity,i.Vector2.multiply2(.5,p)),t.orcaLines.push(x)},t.prototype.process=function(t){for(var e=0,o=t.length;e<o;e++){var n=t[e];if(n.isAgent&&n.orcaLines.length>0){if(!n.isRemove&&n.object){var c=new r(new i.Vector2(n.newVelocity.x,n.newVelocity.y)),s=this.linearProgram2(n.orcaLines,n.maxVelocity,n.prefVelocity,!1,c);s<n.orcaLines.length&&this.linearProgram3(n.orcaLines,0,s,n.maxVelocity,c);var a=c.value;if(n.prefVelocity.x=n.newVelocity.x,n.prefVelocity.y=n.newVelocity.y,n.object){var l=n.object.velocity;l.x=a.x,l.y=a.y,l.z=0}}n.orcaLines.length=0}}},t.prototype.linearProgram1=function(t,e,o,r,n,c){var s=i.Vector2.multiply(t[e].point,t[e].direction),a=i.RVOMath.sqr(s)+i.RVOMath.sqr(o)-i.RVOMath.absSq(t[e].point);if(a<0)return!1;for(var l=i.RVOMath.sqrt(a),p=-s-l,u=-s+l,h=0;h<e;++h){var y=i.RVOMath.det(t[e].direction,t[h].direction),f=i.RVOMath.det(t[h].direction,i.Vector2.subtract(t[e].point,t[h].point));if(i.RVOMath.fabs(y)<=i.RVOMath.RVO_EPSILON){if(f<0)return!1}else{var d=f/y;if(y>0?u=Math.min(u,d):p=Math.max(p,d),p>u)return!1}}return n?i.Vector2.multiply(r,t[e].direction)>0?c.value=i.Vector2.addition(t[e].point,i.Vector2.multiply2(u,t[e].direction)):c.value=i.Vector2.addition(t[e].point,i.Vector2.multiply2(p,t[e].direction)):(d=i.Vector2.multiply(t[e].direction,i.Vector2.subtract(r,t[e].point)),c.value=d<p?i.Vector2.addition(t[e].point,i.Vector2.multiply2(p,t[e].direction)):d>u?i.Vector2.addition(t[e].point,i.Vector2.multiply2(u,t[e].direction)):i.Vector2.addition(t[e].point,i.Vector2.multiply2(d,t[e].direction))),!0},t.prototype.linearProgram2=function(t,e,o,r,n){r?n.value=i.Vector2.multiply2(e,o):i.RVOMath.absSq(o)>i.RVOMath.sqr(e)?n.value=i.Vector2.multiply2(e,i.RVOMath.normalize(o)):n.value=o;for(var c=0;c<t.length;++c)if(i.RVOMath.det(t[c].direction,i.Vector2.subtract(t[c].point,n.value))>0){var s=new i.Vector2(n.value.x,n.value.y);if(!this.linearProgram1(t,c,e,o,r,n))return n.value=s,c}return t.length},t.prototype.linearProgram3=function(t,e,o,r,n){for(var c=0,s=o;s<t.length;++s)if(i.RVOMath.det(t[s].direction,i.Vector2.subtract(t[s].point,n.value))>c){for(var a=[],l=0;l<e;++l)a[a.length]=t[l];for(var p=e;p<s;++p){var u=new i.Line,h=i.RVOMath.det(t[s].direction,t[p].direction);if(i.RVOMath.fabs(h)<=i.RVOMath.RVO_EPSILON){if(i.Vector2.multiply(t[s].direction,t[p].direction)>0)continue;u.point=i.Vector2.multiply2(.5,i.Vector2.addition(t[s].point,t[p].point))}else u.point=i.Vector2.addition(t[s].point,i.Vector2.multiply2(i.RVOMath.det(t[p].direction,i.Vector2.subtract(t[s].point,t[p].point))/h,t[s].direction));var y=i.Vector2.subtract(t[p].direction,t[s].direction);i.RVOMath.absSq(y)>0&&(u.direction=i.RVOMath.normalize(y),a[a.length]=u)}var f=new i.Vector2(n.value.x,n.value.y);this.linearProgram2(a,r,new i.Vector2(-t[s].direction.y,t[s].direction.x),!0,n)<a.length&&(n.value=f),c=i.RVOMath.det(t[s].direction,i.Vector2.subtract(t[s].point,n.value))}},t._inst=null,t}();o.Agent=c,cc._RF.pop()},{"./Maths":"Maths"}],Body:[function(t,e,o){"use strict";cc._RF.push(e,"35d5eaYM9dJwrqPskERJ5FA","Body"),Object.defineProperty(o,"__esModule",{value:!0}),o.cBody=void 0;var i=t("./Object"),r=cc.Mat3,n=(cc.Quat,cc.Vec3),c=function(){function t(t){this.id=0,this.mask=0,this.group=0,this.shape=null,this.object=null,this.priority=0,this.isDirty=15,this.lower=0,this.upper=0,this.aabb=[0,0,0,0,0,0],this.isRemove=!1,this.isRetrieve=!1,this.isIdentity=!1,this.inCollider=!1,this.raidus=0,this.points=[],this.center=new n,this.rotMat3=new r,this.halfSize=new n,this.scale=new n(1,1,1),this.isAgent=!1,this.maxNeighbors=0,this.neighborDist=0,this.maxVelocity=0,this.newVelocity=new n,this.prefVelocity=new n,this.orcaLines=[],this.object=t}return t.prototype.updateBound=function(t){void 0===t&&(t=i.Dirty.NON);var e=this.object;e.updateWorldRTS(t);var o,r=t|e.isDirty;if(this.isAgent){var n=e.velocity;this.newVelocity.x=n.x,this.newVelocity.y=n.y}if(r>0){var c=!1,s=this.shape;if(r&i.Dirty.S){c=!0;var a=this.getScale();this.scale.x=a.x>=0?a.x:-a.x,this.scale.y=a.y>=0?a.y:-a.y,this.scale.z=a.z>=0?a.z:-a.z}r&i.Dirty.R&&(this.isIdentity=0==(o=this.getRotation()).x&&0==o.y&&0==o.z&&1==o.w,c=!0),c&&s.updateAABB(this.getScale(),this.getRotMat3(),this.isIdentity);var l=this.aabb,p=s.aabb,u=this.getPosition();return l[0]=p[0]+u.x,l[1]=p[1]+u.y,l[2]=p[2]+u.z,l[3]=p[3]+u.x,l[4]=p[4]+u.y,l[5]=p[5]+u.z,this.isDirty=15,e.isDirty=i.Dirty.NON,!0}return!1},t.prototype.clear=function(){this.shape=null,this.object=null,this.isRemove=!1,this.inCollider=!1,this.orcaLines.length=0},t.prototype.getScale=function(){return this.object.worldScale},t.prototype.getPosition=function(){return this.object.worldPosition},t.prototype.getRotation=function(){return this.object.worldRotation},t.prototype.getRotMat3=function(){return this.object.worldRotatioMat3},t.prototype.getCenter=function(){if(1&this.isDirty){this.isDirty&=-2;var t=this.aabb,e=this.center;e.x=.5*(t[0]+t[3]),e.y=.5*(t[1]+t[4]),e.z=.5*(t[2]+t[5])}return this.center},t.prototype.getRaidus=function(){if(2&this.isDirty){this.isDirty&=-3;var t=this.scale,e=this.shape.radius;this.raidus=Math.max(t.x,t.y,t.z)*e}return this.raidus},t.prototype.getHalfSize=function(){if(4&this.isDirty){this.isDirty&=-5;var t=this.scale,e=this.shape.size,o=this.halfSize;o.x=t.x*e.x*.5,o.y=t.y*e.y*.5,o.z=t.z*e.z*.5}return this.halfSize},t.prototype.getPoints=function(){if(8&this.isDirty){this.isDirty&=-9;for(var t=this.scale,e=this.getRotMat3().m,o=this.getCenter(),i=this.points,r=this.shape.point2Ds,n=r.length,c=0;c<n;c++){var s=r[c].x*t.x,a=r[c].y*t.y;null==i[c]&&(i[c]=new cc.Vec2),i[c].x=s*e[0]+a*e[3]+0*e[6]+o.x,i[c].y=s*e[1]+a*e[4]+0*e[7]+o.y}i.length=n}return this.points},t}();o.cBody=c,cc._RF.pop()},{"./Object":"Object"}],Collider:[function(t,e,o){"use strict";cc._RF.push(e,"e9918lPZAlNEZGC1kb/9cqo","Collider"),Object.defineProperty(o,"__esModule",{value:!0}),o.cCollider=void 0;var i=t("./Agent"),r=t("./Body"),n=t("./Object"),c=t("./Shape"),s=function(){function t(){this.id=0,this.pools=[],this.axis=-1,this.frameID=0,this.bodys=[],this.isDirty=!1,this.pairs=new Map}return Object.defineProperty(t,"inst",{get:function(){return null==this._inst&&(this._inst=new t),this._inst},enumerable:!1,configurable:!0}),t.prototype.create=function(t){var e=this.pools.pop();return e?(e.object=t,e):((e=new r.cBody(t)).id=this.id++,e)},t.prototype.insert=function(t,e){void 0===e&&(e=!1),t&&(t.inCollider||(this.bodys.push(t),t.inCollider=!0),t.isRemove=!1,t.isRetrieve=!1,e&&t.object&&(t.object.isDirty=n.Dirty.RTS))},t.prototype.remove=function(t,e){void 0===e&&(e=!1),t&&(t.isRemove=!0,t.isRetrieve=e)},t.prototype.reset=function(){this.axis=-1,this.frameID=0,this.isDirty=!0;for(var t=this.bodys,e=t.length-1;e>=0;e--){var o=t[e];this.pools.push(o),o.clear()}t.length=0},t.prototype.clear=function(){this.id=0,this.axis=-1,this.frameID=0,this.isDirty=!0,this.pools.length=0;for(var t=this.bodys,e=t.length-1;e>=0;e--)t[e].clear();t.length=0},t.prototype.update=function(){this.reBuild(),this.triggers(),i.Agent.inst.process(this.bodys)},t.prototype.triggers=function(){++this.frameID;var t=this.axis,e=t>>2&3,o=t>>4&3,r=this.bodys,n=i.Agent.inst,s=0,a=0,l=r.length;for(s=0;s<l;s++){var p=r[s];if(!p.isRemove){var u=p.aabb,h=u[e],y=u[o],f=p.mask,d=p.group,v=p.upper,g=p.object;for(a=s+1;a<l;a++){var b=r[a];if(!b.isRemove){if(v<=b.lower)break;var _=b.aabb,x=b.object,m=f&b.group,O=b.mask&d;if(!(h>_[e+3]||_[e]>u[e+3]||y>_[o+3]||_[o]>u[o+3])){if(p.isAgent&&b.isAgent){var R=p.priority-b.priority;R<=0&&n.check(p,b),R>=0&&n.check(b,p)}if(m||O){var j=g.shape.type,S=x.shape.type;if(j>S){if(!c.ShapeSupport[S|j](b,p))continue}else if(!c.ShapeSupport[j|S](p,b))continue;this.onTrigger(p,b,(m?1:0)|(O?2:0))}}}}}}this.endTrigger()},t.prototype.onTrigger=function(t,e,o){var i=0,r=0,c=t.id,s=e.id;c<s&&(r=c,c=s,s=r),r=(c*(c+1)>>1)+s-1;var a=this.pairs,l=a.get(r);void 0!==l?(i=n.Trigger.stay,l.frameID=this.frameID,l.state=o):(i=n.Trigger.enter,a.set(r,{id:r,a:t,b:e,frameID:this.frameID,state:o}));var p=t.object;1&o&&p&&p.trigger&&!t.isRemove&&p.onTrigger(e,i);var u=e.object;2&o&&u&&u.trigger&&!e.isRemove&&u.onTrigger(t,i)},t.prototype.endTrigger=function(){for(var t=[],e=this.pairs,o=e.size,i=this.frameID,r=e.values(),c=0;c<o;c++){var s=r.next().value,a=s.a,l=s.b;if(s.frameID!=i||a.isRemove||a.isRemove){var p=a.object;p&&p.trigger&&!a.isRemove&&p.onTrigger(l,n.Trigger.exit);var u=l.object;u&&u.trigger&&!l.isRemove&&u.onTrigger(a,n.Trigger.exit),t.push(s.id)}}for(o=t.length-1;o>=0;)e.delete(t[o--]);t.length=0},t.prototype.reBuild=function(){var t=!1,e=this.preBuildAxis();if(((3&e)!=(3&this.axis)||this.axis<0)&&(this.axis=e,t=!0),t||this.isDirty){this.isDirty=!1;var o=this.bodys;e=3&this.axis;for(var i=0,r=o.length;i!==r;i++){var n=o[i],c=n.aabb;n.lower=c[e],n.upper=c[e+3]}t?o.sort(function(t,e){return t.lower-e.lower}):this.sort(o)}},t.prototype.sort=function(t){var e,o=0,i=0;for(o=1,e=t.length;o<e;o++){var r=t[o],n=r.lower;for(i=o-1;i>=0;i--){var c=t[i];if(c.lower<=n)break;t[i+1]=c}i+1!=o&&(t[i+1]=r)}},t.prototype.preBuildAxis=function(){for(var t=0,e=0,o=0,i=0,r=0,n=0,c=0,s=0,a=0,l=0,p=this.bodys,u=p.length,h=0,y=!1,f=0;f<u;f++){var d=p[f];if(d.isRemove)d.isRetrieve&&(this.pools.push(d),d.clear()),d.inCollider=!1;else{++h<=f&&(p[h-1]=d),d.updateBound()&&(y=!0);var v=d.aabb,g=v[3]-v[0],b=v[4]-v[1],_=v[5]-v[2];s+=g*g,a+=b*b,l+=_*_;var x=.5*(v[3]+v[0]);e+=x,o+=x*x;var m=.5*(v[4]+v[1]);i+=m,r+=m*m;var O=.5*(v[5]+v[2]);n+=O,c+=O*O}}this.bodys.length=h,this.isDirty=y;var R=1/h,j=(o-e*e*R)*(s=s>0?h/s:0),S=(r-i*i*R)*(a=a>0?h/a:0),P=(c-n*n*R)*(l=l>0?h/l:0);return 0==j&&(j=s),0==S&&(S=a),0==P&&(P=l),j>S?j>P?(t=0,t|=S>P?36:24):(t=2,t|=j>S?16:4):S>P?(t=1,t|=j>P?32:8):(t=2,t|=j>S?16:4),t},t._inst=null,t}();o.cCollider=s,cc._RF.pop()},{"./Agent":"Agent","./Body":"Body","./Object":"Object","./Shape":"Shape"}],Config:[function(t,e,o){"use strict";cc._RF.push(e,"30590MX/qJKgaC8t0Gc5xmh","Config"),Object.defineProperty(o,"__esModule",{value:!0}),o.Config=void 0,o.Config={demoIdx:0,totalNum:0,isRotate:!1,maxSpeed:1,maxNum:2e3,sphere:0,box:.5},cc._RF.pop()},{}],Joystick:[function(t,e,o){"use strict";cc._RF.push(e,"69083fUaChAwY0BY0dL7eJL","Joystick");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Joystick=void 0;var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.round=null,e.inner=null,e.isStatic=!0,e.isDiretion=!1,e.maxRadius=128,e.activeRange=.1,e.joystickCB=null,e.touchID=-1,e}return r(e,t),e.prototype.start=function(){this.show(this.isStatic),this.isStatic?(this.round.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.round.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.round.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.round.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this)):(this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.touchMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this))},e.prototype.init=function(t){this.joystickCB=t},e.prototype.show=function(t){this.round.active=t},e.prototype.innerPosition=function(t){var e={type:null,active:!0,angle:0,ratio:0},o=this.node.convertToNodeSpaceAR(new cc.Vec3(t.x,t.y));return o.subtract(this.round.position),o.len()<=this.maxRadius*this.activeRange?(this.inner.position=new cc.Vec3,e.active=!1,e):((o.len()>this.maxRadius||this.isDiretion)&&(o=(o=o.normalizeSelf()).multiplyScalar(this.maxRadius)),this.inner.position=o,e.active=!0,e.angle=Math.atan2(o.y,o.x),e.ratio=o.len()/this.maxRadius,e)},e.prototype.touchStart=function(t){if(-1==this.touchID&&(this.touchID=t.getID(),!this.isStatic)){this.show(!0);var e=t.getLocation(),o=this.node.convertToNodeSpaceAR(new cc.Vec3(e.x,e.y));this.round.position=o,this.inner.setPosition(cc.Vec3.ZERO)}if(this.touchID!=t.getID())return!1;var i=this.innerPosition(t.getLocation());return i.type=cc.Node.EventType.TOUCH_START,this.joystickCB&&this.joystickCB(i),!0},e.prototype.touchMove=function(t){if(this.touchID!=t.getID())return!1;var e=this.innerPosition(t.getLocation());return e.type=cc.Node.EventType.TOUCH_MOVE,this.joystickCB&&this.joystickCB(e),!0},e.prototype.touchEnd=function(t){if(this.touchID!=t.getID())return!1;this.touchID=-1,this.show(this.isStatic),this.inner.position=new cc.Vec3;var e={type:cc.Node.EventType.TOUCH_END,active:!1,angle:0,ratio:0};return this.joystickCB&&this.joystickCB(e),!0},n([a(cc.Node)],e.prototype,"round",void 0),n([a(cc.Node)],e.prototype,"inner",void 0),n([a],e.prototype,"isStatic",void 0),n([a],e.prototype,"isDiretion",void 0),n([a],e.prototype,"maxRadius",void 0),n([a],e.prototype,"activeRange",void 0),n([s],e)}(cc.Component);o.Joystick=l,cc._RF.pop()},{}],Maths:[function(t,e,o){"use strict";cc._RF.push(e,"757b8ujSCFOZJeLAYSa5ZNn","Maths"),Object.defineProperty(o,"__esModule",{value:!0}),o.RVOMath=o.Vector2=o.Line=void 0;o.Line=function(){};var i=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.multiply=function(t,e){return t.x*e.x+t.y*e.y},t.multiply2=function(e,o){return new t(o.x*e,o.y*e)},t.division=function(e,o){return 0==o&&(o=1),new t(e.x/o,e.y/o)},t.subtract=function(e,o){return new t(e.x-o.x,e.y-o.y)},t.addition=function(e,o){return new t(e.x+o.x,e.y+o.y)},t}();o.Vector2=i;var r=function(){function t(){}return t.abs=function(t){return this.sqrt(this.absSq(t))},t.absSq=function(t){return i.multiply(t,t)},t.normalize=function(t){return i.division(t,this.abs(t))},t.det=function(t,e){return t.x*e.y-t.y*e.x},t.distSqPointLineSegment=function(t,e,o){var r=i.multiply(i.subtract(o,t),i.subtract(e,t))/this.absSq(i.subtract(e,t));return r<0?this.absSq(i.subtract(o,t)):r>1?this.absSq(i.subtract(o,e)):this.absSq(i.subtract(o,i.addition(t,i.multiply2(r,i.subtract(e,t)))))},t.fabs=function(t){return Math.abs(t)},t.leftOf=function(t,e,o){return this.det(i.subtract(t,o),i.subtract(e,t))},t.sqr=function(t){return t*t},t.sqrt=function(t){return Math.sqrt(t)},t.transfromFloat=function(t){return Math.floor(10*t)/10},t.RVO_EPSILON=1e-5,t.RVO_POSITIVEINFINITY=1e13,t}();o.RVOMath=r,cc._RF.pop()},{}],Object:[function(t,e,o){"use strict";cc._RF.push(e,"f834eM8pElOqJ717Yz/Xt9+","Object");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.cObject=o.MaskBitByGroup=o.GroupIdxByName=o.Dirty=o.Trigger=void 0;var c,s,a=t("./Collider"),l=t("./Shape"),p=cc._decorator,u=p.ccclass,h=p.property;cc.Enum(l.ShapeType),function(t){t[t.default=0]="default",t[t.enter=1]="enter",t[t.stay=2]="stay",t[t.exit=3]="exit"}(c=o.Trigger||(o.Trigger={})),function(t){t[t.R=1]="R",t[t.T=2]="T",t[t.S=4]="S",t[t.RTS=7]="RTS",t[t.RS=5]="RS",t[t.NON=0]="NON"}(s=o.Dirty||(o.Dirty={})),o.GroupIdxByName=function(t){var e=cc.game.groupList.indexOf(t);return e>=0?1<<e:0},o.MaskBitByGroup=function(t){for(var e=0,o=cc.game.collisionMatrix[t],i=0;i<o.length;i++)o[i]&&(e|=1<<i);return e};var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.trigger=!1,e._type=l.ShapeType.Box,e.center=new cc.Vec3,e.size=new cc.Vec3,e.radius=0,e.points=[],e.agent=!1,e.priority=0,e.maxRadius=0,e.maxVelocity=0,e.velocity=new cc.Vec3(0,0,0),e.speed=0,e.angle=0,e.isDirty=s.RTS,e.shape=null,e.body=null,e._worldScale=new cc.Vec3,e._worldRTMat3=new cc.Mat3,e._worldMatrix=new cc.Mat4,e._worldPosition=new cc.Vec3,e._worldRotation=new cc.Quat,e._scale=new cc.Vec3,e._rotation=new cc.Quat,e._position=new cc.Vec3,e}return r(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type!=t&&(this._type=t)},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){switch(this.type){case l.ShapeType.Box:this.shape=new l.cBox(this.center,this.size);break;case l.ShapeType.Sphere:this.shape=new l.cSphere(this.center,this.radius);break;case l.ShapeType.Polygon:this.shape=new l.cPolygon(this.center,this.points)}this.body=a.cCollider.inst.create(this),this.body.isAgent=this.agent,this.body.priority=this.priority,this.body.neighborDist=this.maxRadius,this.body.maxVelocity=this.maxVelocity,this.body.shape=this.shape,this.body.group=1<<this.node.groupIndex,this.body.mask=o.MaskBitByGroup(this.node.groupIndex),a.cCollider.inst.insert(this.body),this.isDirty=s.RTS},Object.defineProperty(e.prototype,"worldScale",{get:function(){return this.updateWorldRTS(),this._worldScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldPosition",{get:function(){return this.updateWorldRTS(),this._worldPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldRotation",{get:function(){return this.updateWorldRTS(),this._worldRotation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldRotatioMat3",{get:function(){return this.updateWorldRTS(),this._worldRTMat3},enumerable:!1,configurable:!0}),e.prototype.setAnchor=function(t){var e=this.center,o=this.shape.center;this.node.setAnchorPoint(t);var i=this.node.getContentSize();o.x=(.5-t.x)*i.width+e.x,o.y=(.5-t.y)*i.height+e.y,this.isDirty|=s.T},e.prototype.setAngle=function(t){this.node.angle=t,this.isDirty|=s.R},e.prototype.getAngle=function(){return this.node.angle},e.prototype.setPosition=function(t){this.node.setPosition(t),this.isDirty|=s.T},e.prototype.setRotation=function(t){this.node.setRotation(t),this.isDirty|=s.R},e.prototype.setScale=function(t){this.node.setScale(t),this.isDirty|=s.S},e.prototype.getRotation=function(){return this.node.getRotation(this._rotation),this._rotation},e.prototype.getPosition=function(){return this.node.getPosition(this._position),this._position},e.prototype.getScale=function(){return this.node.getScale(this._scale),this._scale},e.prototype.remove=function(t){return void 0===t&&(t=!0),a.cCollider.inst.remove(this.body,t),this.node.removeFromParent(!1),this.node},e.prototype.insert=function(t){a.cCollider.inst.insert(this.body,!0),this.node.parent!=t&&t.addChild(this.node)},e.prototype.setAnimation=function(){},e.prototype.setColor=function(){},e.prototype.init=function(){},e.prototype.onTrigger=function(t,e){switch(e){case c.enter:case c.stay:case c.exit:}},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks(),this.shape=null,this.body=null},e.prototype._updateWorldMatrix=function(t,e){if(t.frameID==e)return t.localDirty;t.frameID=e;var o=0;if(t._parent&&(o=this._updateWorldMatrix(t._parent,e)),o|=t._localMatDirty,t._worldMatDirty){t._calculWorldMatrix();for(var i=t._children,r=0,n=i.length;r<n;r++)i[r]._worldMatDirty=!0}return t.localDirty=o,o},e.prototype.updateWorldRTS=function(t){void 0===t&&(t=s.NON),this.node.localDirty=0,this._updateWorldMatrix(this.node,cc.director.getTotalFrames());var e=this.node.localDirty;e&&(1&e&&(this.isDirty|=s.T),2&e&&(this.isDirty|=s.S),4&e&&(this.isDirty|=s.R));var o=this.isDirty|t;if(o){var i=this.node._worldMatrix.m;if(o&s.T){var r=this._worldPosition;r.x=i[12],r.y=i[13],r.z=i[14]}var n=this._worldScale;o&s.S&&(n.x=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),n.y=Math.sqrt(i[4]*i[4]+i[5]*i[5]+i[6]*i[6]),n.z=Math.sqrt(i[8]*i[8]+i[9]*i[9]+i[10]*i[10]));var c=this._worldRTMat3.m;if(o&s.R){var a=1/n.x,l=1/n.y,p=1/n.z;c[0]=i[0]*a,c[1]=i[1]*a,c[2]=i[2]*a,c[3]=i[4]*l,c[4]=i[5]*l,c[5]=i[6]*l,c[6]=i[8]*p,c[7]=i[9]*p,c[8]=i[10]*p,cc.Quat.fromMat3(this._worldRotation,this._worldRTMat3)}}},n([h()],e.prototype,"trigger",void 0),n([h({type:l.ShapeType})],e.prototype,"type",null),n([h({})],e.prototype,"center",void 0),n([h({visible:function(){return this.type==l.ShapeType.Box}})],e.prototype,"size",void 0),n([h({visible:function(){return this.type==l.ShapeType.Sphere}})],e.prototype,"radius",void 0),n([h({type:[cc.Vec2],visible:function(){return this.type==l.ShapeType.Polygon}})],e.prototype,"points",void 0),n([h()],e.prototype,"agent",void 0),n([h({type:cc.Integer,visible:function(){return this.agent}})],e.prototype,"priority",void 0),n([h({visible:function(){return this.agent}})],e.prototype,"maxRadius",void 0),n([h({visible:function(){return this.agent}})],e.prototype,"maxVelocity",void 0),n([h()],e.prototype,"velocity",void 0),n([u],e)}(cc.Component);o.cObject=y,cc._RF.pop()},{"./Collider":"Collider","./Shape":"Shape"}],Shape:[function(t,e,o){"use strict";cc._RF.push(e,"83d94jbLnZF7oVs2WQ1jJK+","Shape");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ShapeSupport=o.cPolygon=o.cSphere=o.cBox=o.cShape=o.ShapeType=void 0;var n,c=t("./AILib"),s=cc.Vec3;(function(t){t[t.Box=1]="Box",t[t.Sphere=2]="Sphere",t[t.Polygon=4]="Polygon"})(n=o.ShapeType||(o.ShapeType={}));var a=function(){function t(t,e){this.radius=0,this.height=0,this.type=n.Box,this.point2Ds=[],this.size={x:0,y:0,z:0},this.center={x:0,y:0,z:0},this.aabb=[0,0,0,0,0,0],this.type=e,this.center.x=t.x,this.center.y=t.y,this.center.z=t.z}return t.prototype.updateAABB=function(t,e,o){void 0===o&&(o=!0);var i=this.size,r=this.center,n=t.x,c=t.y,s=t.z,a=r.x,l=r.y,p=r.z,u=.5*i.x,h=.5*i.y,y=.5*i.z,f=this.aabb;if(o)u=Math.abs(u*n),h=Math.abs(h*c),y=Math.abs(y*s),f[0]=a*n-u,f[1]=l*c-h,f[2]=p*s-y,f[3]=a*n+u,f[4]=l*c+h,f[5]=p*s+y;else{var d=e.m,v=d[0]*n,g=d[1]*n,b=d[2]*n,_=d[3]*c,x=d[4]*c,m=d[5]*c,O=d[6]*s,R=d[7]*s,j=d[8]*s,S=v*a+_*l+O*p,P=g*a+x*l+R*p,w=b*a+m*l+j*p,V=Math.abs(v)*u+Math.abs(_)*h+Math.abs(O)*y,C=Math.abs(g)*u+Math.abs(x)*h+Math.abs(R)*y,M=Math.abs(b)*u+Math.abs(m)*h+Math.abs(j)*y;f[0]=S-V,f[1]=P-C,f[2]=w-M,f[3]=S+V,f[4]=P+C,f[5]=w+M}return f},t}();o.cShape=a;var l=function(t){function e(e,o){var i=t.call(this,e,n.Box)||this;return i.size.x=o.x,i.size.y=o.y,i.size.z=o.z,i}return r(e,t),e}(a);o.cBox=l;var p=function(t){function e(e,o){var i=t.call(this,e,n.Sphere)||this;return i.radius=o,i.size.x=2*o,i.size.y=2*o,i.size.z=2*o,i}return r(e,t),e}(a);o.cSphere=p;var u=function(t){function e(e,o){var i=t.call(this,e,n.Polygon)||this;i.point2Ds=o;for(var r=o[0].x,c=o[0].y,s=r,a=c,l=o.length,p=1;p<l;p++){var u=o[p].x,h=o[p].y;r>=u?r=u:s<=u&&(s=u),c>=h?c=h:a<=h&&(a=h)}return i.size.x=s-r,i.size.y=a-c,i.size.z=0,i}return r(e,t),e}(a);o.cPolygon=u;var h=new cc.Vec3,y=new cc.Vec2;o.ShapeSupport=[],o.ShapeSupport[n.Box|n.Box]=function(t,e){return!(!t.isIdentity||!e.isIdentity)||c.obbIntersect(t.getCenter(),t.getHalfSize(),t.getRotMat3(),e.getCenter(),e.getHalfSize(),e.getRotMat3())},o.ShapeSupport[n.Box|n.Sphere]=function(t,e){return t.isIdentity?(s.subtract(h,e.getCenter(),t.getCenter()),c.sphereAABBDistance(h,e.getRaidus(),t.getHalfSize())):c.sphereOBBDistance(e.getCenter(),e.getRaidus(),t.getCenter(),t.getRotation(),t.getHalfSize())},o.ShapeSupport[n.Sphere|n.Sphere]=function(t,e){var o=t.getCenter(),i=e.getCenter();s.subtract(h,o,i);var r=h.lengthSqr(),n=t.getRaidus()+e.getRaidus();return r<=n*n},o.ShapeSupport[n.Box|n.Polygon]=function(t,e){return c.default.polygonPolygon(t.getPoints(),e.getPoints())},o.ShapeSupport[n.Sphere|n.Polygon]=function(t,e){var o=t.getCenter(),i=t.getRaidus();return y.x=o.x,y.y=o.y,c.default.polygonCircle(e.getPoints(),y,i)},o.ShapeSupport[n.Polygon|n.Polygon]=function(t,e){return c.default.polygonPolygon(t.getPoints(),e.getPoints())},cc._RF.pop()},{"./AILib":"AILib"}],Sprite2d:[function(t,e,o){"use strict";cc._RF.push(e,"d57aevq0CJFnKQq1RrkjqeL","Sprite2d");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Sprite2d=void 0;var c=t("../collision/Object"),s=cc._decorator,a=s.ccclass,l=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=null,e.isHit=!1,e}return r(e,t),e.prototype.start=function(){this.sprite=this.node.getComponent(cc.Sprite)},e.prototype.setColor=function(t){this.node.color=t},e.prototype.update=function(){this.setColor(this.isHit?cc.Color.GREEN:cc.Color.WHITE),this.isHit=!1},e.prototype.onTrigger=function(t,e){var o=e!=c.Trigger.exit;o&&!this.isHit&&(this.isHit=o)},n([a],e)}(c.cObject));o.Sprite2d=l,cc._RF.pop()},{"../collision/Object":"Object"}],bulletHell:[function(t,e,o){"use strict";cc._RF.push(e,"14305yAyJ1MjZu4r7sFo1Ka","bulletHell");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.BulletHell=void 0;var c=t("../../collision/Collider"),s=t("../../Joystick/Joystick"),a=t("./bullet"),l=t("./ghost"),p=t("./player"),u=t("./snailTail"),h=t("./skill"),y=cc._decorator,f=y.ccclass,d=y.property,v=new cc.Vec3,g=(new cc.Quat,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ghost=null,e.snailTail=null,e.player=null,e.objects=null,e.bullets=null,e.camera=null,e.joystick=null,e.max=1e3,e.raidus=2e3,e.cyclTime=.03,e}var o;return r(e,t),o=e,Object.defineProperty(e,"inst",{get:function(){return this._inst},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){o._inst=this},e.prototype.onDestroy=function(){c.cCollider.inst.clear(),l.Ghost.pools.length=0,h.Skill.pools.length=0,a.Bullet.pools.length=0,u.SnailTail.pools.length=0},e.prototype.start=function(){var t=this,e=cc.instantiate(this.player);this.node.addChild(e);var o=1;this.schedule(function(){if(t.objects.children.length<t.max){var e=(.5+.7548776662466928*o)%1,i=(.5+.5698402909980534*o)%1;t.createEnemy(e,i),o++}},this.cyclTime)},e.prototype.createEnemy=function(t,e){var o=null;(o=Math.random()>.5?l.Ghost.get(this.ghost):u.SnailTail.get(this.snailTail)).insert(this.objects);var i=p.Player.inst.getPosition();v.x=(t-.5)*this.raidus+i.x,v.y=(e-.5)*this.raidus+i.y,v.z=0,o.setPosition(v),o.init()},e.prototype.update=function(t){c.cCollider.inst.update(t)},e.prototype.lateUpdate=function(){var t=p.Player.inst.getPosition();cc.Vec3.lerp(v,this.camera.position,t,.25),this.camera.position=v;var e=this.node.getChildByName("bg");if(e){var o=e.getComponent(cc.Sprite);o&&(o.getMaterial(0).setProperty("tilingOffset",new cc.Vec2(t.x/512,-t.y/512)),e.position=t)}},e._inst=null,n([d(cc.Prefab)],e.prototype,"ghost",void 0),n([d(cc.Prefab)],e.prototype,"snailTail",void 0),n([d(cc.Prefab)],e.prototype,"player",void 0),n([d(cc.Node)],e.prototype,"objects",void 0),n([d(cc.Node)],e.prototype,"bullets",void 0),n([d(cc.Node)],e.prototype,"camera",void 0),n([d(s.Joystick)],e.prototype,"joystick",void 0),n([d(cc.Integer)],e.prototype,"max",void 0),n([d],e.prototype,"raidus",void 0),n([d],e.prototype,"cyclTime",void 0),o=n([f],e)}(cc.Component));o.BulletHell=g,cc._RF.pop()},{"../../Joystick/Joystick":"Joystick","../../collision/Collider":"Collider","./bullet":"bullet","./ghost":"ghost","./player":"player","./skill":"skill","./snailTail":"snailTail"}],bullet:[function(t,e,o){"use strict";cc._RF.push(e,"10c41wzOQZNApJbN8KIuhYr","bullet");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Bullet=void 0;var c=t("../../collision/Object"),s=cc._decorator,a=s.ccclass,l=(s.property,new cc.Vec3),p=(new cc.Quat,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lifeTime=0,e}var o;return r(e,t),o=e,e.get=function(t){var e=this.pools.pop();return e||(e=cc.instantiate(t).getComponent(o)),e},e.put=function(t){this.pools.push(t),t.remove(!1)},e.prototype.update=function(t){if(this.lifeTime-=t,this.lifeTime<0)o.put(this);else{var e=this.getPosition(),i=this.velocity;l.x=e.x+i.x*t,l.y=e.y+i.y*t,l.z=e.z+i.z*t,this.setPosition(l)}},e.prototype.onTrigger=function(t,e){e!=c.Trigger.exit&&o.put(this)},e.pools=[],o=n([a],e)}(c.cObject));o.Bullet=p,cc._RF.pop()},{"../../collision/Object":"Object"}],demo2d:[function(t,e,o){"use strict";cc._RF.push(e,"aec98DdhcRAY77R6c3kpLNa","demo2d");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.demo2d=void 0;var c=t("./Config"),s=t("../../collision/Collider"),a=t("../../collision/Object"),l=t("../../collision/Shape"),p=cc._decorator,u=p.ccclass,h=p.property,y=new cc.Vec3,f=(new cc.Quat,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box=null,e.sphere=null,e.capacity=1024,e.speed=100,e.world=new cc.Vec2(960,640),e.objects=[],e.boxNum=0,e.sphereNum=0,e}return r(e,t),e.prototype.resetRotation=function(){for(var t=this.objects,e=t.length,o=0;o<e;o++)t[o].setAngle(0)},e.prototype.randomRotation=function(){for(var t=this.objects,e=t.length,o=0;o<e;o++)t[o].setAngle(360*Math.random())},e.prototype.onDestroy=function(){this.boxNum=0,this.sphereNum=0,this.objects.length=0,s.cCollider.inst.reset()},e.prototype.addObjects=function(t,e){for(var o=0;o<t;o++){var i=cc.instantiate(e);this.node.addChild(i),y.x=(Math.random()-.5)*this.world.x,y.y=(Math.random()-.5)*this.world.y,y.z=0,i.position=y;var r=i.getComponent(a.cObject),n=Math.random()*Math.PI*2;r.angle=Math.random();var s=this.speed*(.9*Math.random()+.1);r.velocity.x=Math.cos(n)*s,r.velocity.y=Math.sin(n)*s,r.velocity.z=0,c.Config.isRotate&&r.setAngle(360*Math.random()),this.objects.push(r)}},e.prototype.worldManager=function(t){t*=c.Config.maxSpeed;var e=Math.round(c.Config.box*c.Config.maxNum);if(e>this.boxNum){var o=cc.misc.clampf(e-this.boxNum,0,20);this.addObjects(o,this.box),this.boxNum+=o}var i=Math.round(c.Config.sphere*c.Config.maxNum);i>this.sphereNum&&(o=cc.misc.clampf(i-this.sphereNum,0,20),this.addObjects(o,this.sphere),this.sphereNum+=o);for(var r=this.objects,n=0;n<r.length;n++){var s=r[n],a=s.velocity,p=s.getPosition();Math.abs(p.x+a.x*t)>this.world.x/2&&(a.x=-a.x),Math.abs(p.y+a.y*t)>this.world.y/2&&(a.y=-a.y),p.x+=a.x*t,p.y+=a.y*t,s.setPosition(p),e<this.boxNum&&s.type!=l.ShapeType.Sphere&&(s.remove().destroy(),r.splice(n--,1),this.boxNum--),i<this.sphereNum&&s.type==l.ShapeType.Sphere&&(s.remove().destroy(),r.splice(n--,1),this.sphereNum--)}},e.prototype.update=function(t){this.worldManager(t),s.cCollider.inst.update(t)},n([h(cc.Prefab)],e.prototype,"box",void 0),n([h(cc.Prefab)],e.prototype,"sphere",void 0),n([h(cc.Integer)],e.prototype,"capacity",void 0),n([h(cc.Integer)],e.prototype,"speed",void 0),n([h(cc.Vec2)],e.prototype,"world",void 0),n([u],e)}(cc.Component));o.demo2d=f,cc._RF.pop()},{"../../collision/Collider":"Collider","../../collision/Object":"Object","../../collision/Shape":"Shape","./Config":"Config"}],detector:[function(t,e,o){"use strict";cc._RF.push(e,"d96b6StHElCqLiLQGDzzA38","detector");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.detector=void 0;var c=t("../../collision/Object"),s=t("./player"),a=cc._decorator,l=a.ccclass,p=a.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attackRaidus=0,e.collectRaidus=0,e.GOODS=c.GroupIdxByName("goods"),e.ENEMY=c.GroupIdxByName("enemy"),e}return r(e,t),e.prototype.start=function(){this.body.group=0,this.body.mask=this.ENEMY|this.GOODS},e.prototype.onTrigger=function(t,e){if(e!=c.Trigger.exit){var o=t.getPosition(),i=this.body.getPosition(),r=cc.Vec3.squaredDistance(i,o);r<this.attackRaidus*this.attackRaidus&&t.group==this.ENEMY&&s.Player.inst.onAttack(t),r<this.collectRaidus*this.collectRaidus&&t.group==this.GOODS&&s.Player.inst.onCollect(t)}},n([p],e.prototype,"attackRaidus",void 0),n([p],e.prototype,"collectRaidus",void 0),n([l],e)}(c.cObject);o.detector=u,cc._RF.pop()},{"../../collision/Object":"Object","./player":"player"}],enemy:[function(t,e,o){"use strict";cc._RF.push(e,"ab37babyJFDhI5irIYLsBtw","enemy");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Enemy=void 0;var c=t("../../collision/Object"),s=t("./player"),a=cc._decorator,l=a.ccclass,p=a.property,u=new cc.Vec3,h=(new cc.Quat,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e}var o;return r(e,t),o=e,e.get=function(t){var e=this.pools.pop();return e||(e=cc.instantiate(t).getComponent(o)),e},e.put=function(t){this.pools.push(t),t.remove(!1)},e.prototype.init=function(){var t=this;this.velocity.set(cc.Vec3.ZERO),this.unscheduleAllCallbacks(),this.schedule(function(){var e=t.worldPosition,o=s.Player.inst.worldPosition;cc.Vec3.subtract(t.velocity,o,e),t.velocity.normalizeSelf().multiplyScalar(t.speed)},.5,cc.macro.REPEAT_FOREVER,0)},e.prototype.update=function(t){var e=this.getPosition(),o=this.velocity;u.x=e.x+o.x*t,u.y=e.y+o.y*t,u.z=e.z+o.z*t,this.setPosition(u)},e.prototype.onTrigger=function(t,e){e!=c.Trigger.exit&&o.put(this)},e.pools=[],n([p],e.prototype,"speed",void 0),o=n([l],e)}(c.cObject));o.Enemy=h,cc._RF.pop()},{"../../collision/Object":"Object","./player":"player"}],ghost:[function(t,e,o){"use strict";cc._RF.push(e,"a6edbJLuWBGk7VWehz3M+o2","ghost");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Ghost=void 0;var c=t("../../collision/Object"),s=t("./player"),a=cc._decorator,l=a.ccclass,p=a.property,u=new cc.Vec3,h=(new cc.Quat,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e.checkTime=.5,e.nextCheck=0,e.PLAYER=c.GroupIdxByName("player"),e.BULLET=c.GroupIdxByName("bullet"),e}var o;return r(e,t),o=e,e.get=function(t){var e=this.pools.pop();return e||(e=cc.instantiate(t).getComponent(o)),e},e.put=function(t){this.pools.push(t),t.remove(!1)},e.prototype.init=function(){this.nextCheck=0,this.velocity.set(cc.Vec3.ZERO)},e.prototype.update=function(t){var e=this.getPosition(),o=this.velocity;u.x=e.x+o.x*t,u.y=e.y+o.y*t,u.z=e.z+o.z*t,this.setPosition(u),this.check(t)},e.prototype.check=function(t){if(this.nextCheck-=t,this.nextCheck<=0){this.nextCheck=this.checkTime;var e=this.getScale(),o=this.worldPosition,i=s.Player.inst.worldPosition;cc.Vec3.subtract(this.velocity,i,o),this.velocity.normalizeSelf().multiplyScalar(this.speed),this.velocity.x*e.x<0&&(e.x=-e.x,this.setScale(e))}},e.prototype.onTrigger=function(t,e){if(e!=c.Trigger.exit){switch(t.group){case this.BULLET:case this.PLAYER:}o.put(this)}},e.pools=[],n([p],e.prototype,"speed",void 0),n([p],e.prototype,"checkTime",void 0),o=n([l],e)}(c.cObject));o.Ghost=h,cc._RF.pop()},{"../../collision/Object":"Object","./player":"player"}],gun:[function(t,e,o){"use strict";cc._RF.push(e,"fe09d6P9R9NZ7Zg2YZ/bJ5g","gun");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Gun=void 0;var c=t("./bullet"),s=t("./bulletHell"),a=cc._decorator,l=a.ccclass,p=a.property,u=new cc.Vec3,h=(new cc.Quat,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bullet=null,e.point=null,e.speed=1,e.lifeTime=.5,e.cycleTime=.5,e.minDist=0,e.nextCycle=0,e.isShoot=!1,e.direction=new cc.Vec3,e}return r(e,t),e.prototype.shoot=function(t){if(!(this.nextCycle>0)){this.node.convertToWorldSpaceAR(cc.Vec3.ZERO,u),cc.Vec3.subtract(u,t,u);var e=u.lengthSqr();if(!this.isShoot)return this.isShoot=!0,this.minDist=e,void this.direction.set(u);e<this.minDist&&(this.minDist=e,this.direction.set(u))}},e.prototype.update=function(t){if(this.nextCycle-=t,this.isShoot){this.isShoot=!1,this.nextCycle=this.cycleTime;var e=s.BulletHell.inst.bullets,o=c.Bullet.get(this.bullet);o.insert(e),o.init(),this.point.convertToWorldSpaceAR(cc.Vec3.ZERO,u),e.convertToNodeSpaceAR(u,u),o.setPosition(u);var i=this.direction.normalizeSelf(),r=Math.atan2(i.y,i.x);r=cc.misc.radiansToDegrees(r),o.setAngle(r),o.velocity.set(i).multiplyScalar(this.speed),o.lifeTime=this.lifeTime,this.node.angle=r}},n([p(cc.Prefab)],e.prototype,"bullet",void 0),n([p(cc.Node)],e.prototype,"point",void 0),n([p],e.prototype,"speed",void 0),n([p],e.prototype,"lifeTime",void 0),n([p],e.prototype,"cycleTime",void 0),n([l],e)}(cc.Component));o.Gun=h,cc._RF.pop()},{"./bullet":"bullet","./bulletHell":"bulletHell"}],main:[function(t,e,o){"use strict";cc._RF.push(e,"9889d0Qs+1HLpCljymIPJZu","main");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.main=void 0;var c=t("./demos/bulletHell/bulletHell"),s=t("./demos/bulletHell/player"),a=t("./demos/collisions/Config"),l=t("./demos/collisions/demo2d"),p=cc._decorator,u=p.ccclass,h=p.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.demo2d=null,e.demoBullet=null,e.demosNode=null,e.sbox=null,e.ssphere=null,e.boxTxt=null,e.sphereTxt=null,e.speedTxt=null,e.totalTxt=null,e.currScense=null,e}return r(e,t),e.prototype.start=function(){var t=this;this.changeDemos(),this.schedule(function(){var e=0;switch(a.Config.demoIdx){case 0:e=t.currScense.getComponentInChildren(l.demo2d).objects.length;break;case 1:e=t.currScense.getComponentInChildren(c.BulletHell).objects.children.length}t.totalTxt.string=""+e},.1)},e.prototype.changeDemos=function(){var t=this;switch(this.currScense&&(this.currScense.removeFromParent(),this.currScense.destroy(),this.currScense=null),a.Config.demoIdx){case 0:this.currScense=cc.instantiate(this.demo2d),this.node.getChildByName("Left").active=!0,this.node.getChildByName("Skill").active=!1;break;case 1:this.currScense=cc.instantiate(this.demoBullet),this.node.getChildByName("Left").active=!1,this.node.getChildByName("Skill").active=!0}this.scheduleOnce(function(){t.demosNode.addChild(t.currScense)})},e.prototype.onDemos=function(t){var e=t.target.getSiblingIndex();e!=a.Config.demoIdx&&(a.Config.demoIdx=e,this.changeDemos())},e.prototype.onSpeed=function(t){a.Config.maxSpeed=t.progress,this.speedTxt.string="speed:"+Math.round(100*a.Config.maxSpeed)},e.prototype.onRotation=function(t){if(a.Config.isRotate!=t.isChecked)switch(a.Config.isRotate=t.isChecked,a.Config.demoIdx){case 0:a.Config.isRotate?this.currScense.getComponentInChildren(l.demo2d).randomRotation():this.currScense.getComponentInChildren(l.demo2d).resetRotation()}},e.prototype.onSphere=function(t){var e=a.Config.maxNum,o=t.progress;o+a.Config.box>=1&&(this.boxTxt.string="box:"+Math.round((1-o)*e),this.sbox.progress=1-o,a.Config.box=1-o),this.sphereTxt.string="sphere:"+Math.round(o*e),t.progress=o,a.Config.sphere=o},e.prototype.onBox=function(t){var e=a.Config.maxNum,o=t.progress;o+a.Config.sphere>=1&&(this.sphereTxt.string="sphere:"+Math.round((1-o)*e),this.ssphere.progress=1-o,a.Config.sphere=1-o),this.boxTxt.string="box:"+Math.round(o*e),t.progress=o,a.Config.box=o},e.prototype.onSkill=function(t){s.Player.inst.onSkill(),t.target.active=!1,this.scheduleOnce(function(){1==a.Config.demoIdx&&(t.target.active=!0)},5)},n([h(cc.Prefab)],e.prototype,"demo2d",void 0),n([h(cc.Prefab)],e.prototype,"demoBullet",void 0),n([h(cc.Node)],e.prototype,"demosNode",void 0),n([h(cc.Slider)],e.prototype,"sbox",void 0),n([h(cc.Slider)],e.prototype,"ssphere",void 0),n([h(cc.Label)],e.prototype,"boxTxt",void 0),n([h(cc.Label)],e.prototype,"sphereTxt",void 0),n([h(cc.Label)],e.prototype,"speedTxt",void 0),n([h(cc.Label)],e.prototype,"totalTxt",void 0),n([u],e)}(cc.Component);o.main=y,cc._RF.pop()},{"./demos/bulletHell/bulletHell":"bulletHell","./demos/bulletHell/player":"player","./demos/collisions/Config":"Config","./demos/collisions/demo2d":"demo2d"}],player:[function(t,e,o){"use strict";cc._RF.push(e,"069bfPViMNIZohyngFLLVnE","player");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Player=void 0;var c=t("../../collision/Object"),s=t("./bulletHell"),a=t("./gun"),l=t("./skill"),p=cc._decorator,u=p.ccclass,h=p.property,y=new cc.Vec3,f=(new cc.Quat,cc.Node),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=1,e.skill=null,e.guns=[],e.velocity=new cc.Vec3,e}var o;return r(e,t),o=e,Object.defineProperty(e,"inst",{get:function(){return this._inst},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),o._inst=this},e.prototype.start=function(){var t=this;this.guns=this.node.getComponentsInChildren(a.Gun);var e=s.BulletHell.inst.joystick;e&&e.init(function(e){var o=e.angle,i=e.ratio;switch(e.type){case f.EventType.TOUCH_START:t.velocity.set(cc.Vec3.ZERO);break;case f.EventType.TOUCH_MOVE:var r=t.velocity,n=t.speed*i;r.x=Math.cos(o)*n,r.y=Math.sin(o)*n,r.z=0;break;case f.EventType.TOUCH_END:t.velocity.set(cc.Vec3.ZERO)}})},e.prototype.update=function(t){var e=this.getPosition(),o=this.velocity;y.x=e.x+o.x*t,y.y=e.y+o.y*t,y.z=e.z+o.z*t,this.setPosition(y)},e.prototype.onAttack=function(t){for(var e=this.guns,o=e.length,i=0;i<o;i++){var r=t.getPosition();e[i].shoot(r)}},e.prototype.onSkill=function(){for(var t=Math.random()*Math.PI*2,e=0;e<3;e++){var o=s.BulletHell.inst.bullets,i=l.Skill.get(this.skill);i.insert(o),i.init(),this.node.convertToWorldSpaceAR(cc.Vec3.ZERO,y),o.convertToNodeSpaceAR(y,y),i.setPosition(y),t+=2*Math.PI/3;var r=Math.cos(t),n=Math.sin(t);i.velocity.x=300*r,i.velocity.y=300*n,i.velocity.z=0,i.lifeTime=3,i.angle=0}},e.prototype.onCollect=function(){},e.prototype.onTrigger=function(){c.Trigger.exit},e._inst=null,n([h],e.prototype,"speed",void 0),n([h(cc.Prefab)],e.prototype,"skill",void 0),o=n([u],e)}(c.cObject);o.Player=d,cc._RF.pop()},{"../../collision/Object":"Object","./bulletHell":"bulletHell","./gun":"gun","./skill":"skill"}],skill:[function(t,e,o){"use strict";cc._RF.push(e,"2fedeWZKpxDbopwo7jBz3Ko","skill");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Skill=void 0;var c=t("../../collision/Object"),s=cc._decorator,a=s.ccclass,l=(s.property,new cc.Vec3),p=(new cc.Quat,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lifeTime=0,e}var o;return r(e,t),o=e,e.get=function(t){var e=this.pools.pop();return e||(e=cc.instantiate(t).getComponent(o)),e},e.put=function(t){this.pools.push(t),t.remove(!1)},e.prototype.update=function(t){if(this.lifeTime-=t,this.lifeTime<0)o.put(this);else{var e=this.getPosition(),i=this.velocity;l.x=e.x+i.x*t,l.y=e.y+i.y*t,l.z=e.z+i.z*t,this.angle+=6e4*t,this.setAngle(180*this.angle/Math.PI),this.setPosition(l)}},e.prototype.onTrigger=function(){c.Trigger.exit},e.pools=[],o=n([a],e)}(c.cObject));o.Skill=p,cc._RF.pop()},{"../../collision/Object":"Object"}],snailTail:[function(t,e,o){"use strict";cc._RF.push(e,"d2a8aUstylHNbyhzHGRhhbK","snailTail");var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,i){var r,n=arguments.length,c=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(n<3?r(c):n>3?r(e,o,c):r(e,o))||c);return n>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.SnailTail=void 0;var c=t("../../collision/Object"),s=t("./player"),a=cc._decorator,l=a.ccclass,p=a.property,u=new cc.Vec3,h=(new cc.Quat,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=0,e.checkTime=.5,e.nextCheck=0,e.PLAYER=c.GroupIdxByName("player"),e.BULLET=c.GroupIdxByName("bullet"),e}var o;return r(e,t),o=e,e.get=function(t){var e=this.pools.pop();return e||(e=cc.instantiate(t).getComponent(o)),e},e.put=function(t){this.pools.push(t),t.remove(!1)},e.prototype.init=function(){this.nextCheck=0,this.velocity.set(cc.Vec3.ZERO)},e.prototype.update=function(t){var e=this.getPosition(),o=this.velocity;u.x=e.x+o.x*t,u.y=e.y+o.y*t,u.z=e.z+o.z*t,this.setPosition(u),this.check(t)},e.prototype.check=function(t){if(this.nextCheck-=t,this.nextCheck<=0){this.nextCheck=this.checkTime;var e=this.getScale(),o=this.worldPosition,i=s.Player.inst.worldPosition;cc.Vec3.subtract(this.velocity,i,o),this.velocity.normalizeSelf().multiplyScalar(this.speed),this.velocity.x*e.x<0&&(e.x=-e.x,this.setScale(e))}},e.prototype.onTrigger=function(t,e){if(e!=c.Trigger.exit){switch(t.group){case this.BULLET:case this.PLAYER:}o.put(this)}},e.pools=[],n([p],e.prototype,"speed",void 0),n([p],e.prototype,"checkTime",void 0),o=n([l],e)}(c.cObject));o.SnailTail=h,cc._RF.pop()},{"../../collision/Object":"Object","./player":"player"}]},{},["Joystick","AILib","Agent","Body","Collider","Maths","Object","Shape","bullet","bulletHell","detector","enemy","ghost","gun","player","skill","snailTail","Config","demo2d","main","Sprite2d"]);